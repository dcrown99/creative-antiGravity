# 漫画ダウンローダー - 使い方ガイド

## 🚀 クイックスタート

### 1️⃣ 初回セットアップ

1. **ショートカットをデスクトップに作成**
   - `デスクトップにショートカット作成.bat` をダブルクリック
   - デスクトップに「漫画ダウンローダー」のショートカットが作成されます

2. **初回実行**
   - デスクトップの「漫画ダウンローダー」をダブルクリック
   - 初回のみ、必要なライブラリとブラウザが自動的にインストールされます（数分かかります）

### 2️⃣ 基本的な使い方

#### 方法A: 対話モードで使用

1. デスクトップの「漫画ダウンローダー」をダブルクリック
2. メニューから「1」を選択
3. ダウンロードしたい漫画ページのURLを入力
4. Enterキーを押してダウンロード開始
5. 完了したら `H:\DL\MangaDownloads` フォルダを確認

#### 方法B: 一括ダウンロード

1. `urls.txt` ファイルを開く
2. ダウンロードしたいURL��1行に1つずつ記入

   ```
   https://example.com/manga/chapter1
   https://example.com/manga/chapter2
   https://example.com/manga/chapter3
   ```

3. デスクトップの「漫画ダウンローダー」をダブルクリック
4. メニューから「2」を選択
5. すべてのURLが順番にダウンロードされます

## 📖 詳細説明

### 保存先について

ダウンロードされたCBZファイルは以下のフォルダに保存されます:

```
H:\DL\MangaDownloads\
```

保存先を変更したい場合は、コマンドプロンプトで以下のように実行してください:

```bash
python download_images_as_cbz.py "URL" --output-dir "C:\保存先のパス"
```

### ファイル名について

- URLを入力した場合、URLから自動的にファイル名が生成されます
- 手動でファイル名を指定する場合:

```bash
python download_images_as_cbz.py "URL" --name "マイ漫画_第1話"
```

### コマンドラインオプション

バッチファイルではなく、直接Pythonスクリプトを実行する場合のオプション:

```bash
# 基本的な使い方
python download_images_as_cbz.py "URL"

# ファイル名を指定
python download_images_as_cbz.py "URL" --name "ファイル名"

# 保存先を指定
python download_images_as_cbz.py "URL" --output-dir "C:\保存先"

# ファイルから一括ダウンロード
python download_images_as_cbz.py --file urls.txt

# 一時フォルダを残す（デバッグ用）
python download_images_as_cbz.py "URL" --keep-temp

# 複数のURLを一度に指定
python download_images_as_cbz.py "URL1" "URL2" "URL3"

# ヘルプを表示
python download_images_as_cbz.py --help
```

### urls.txt の書き方

```
# コメント行は # で始めます
https://example.com/manga/chapter1

# 空白行は無視されます
https://example.com/manga/chapter2

https://example.com/manga/chapter3
```

## 🎨 CBZファイルについて

CBZ (Comic Book Archive) は、漫画を読むための標準的なフォーマットです。

### CBZファイルを開く方法

以下のようなアプリケーションで開くことができます:

- **Windows**: 
  - Sumatra PDF (無料)
  - CDisplayEx (無料)
  - Calibre (無料)
  
- **スマートフォン**: 
  - Perfect Viewer (Android)
  - ComicFlow (iOS)
  - Chunky Comic Reader (iOS)

## ⚙️ トラブルシューティング

### エラー: "Hドライブが接続されていません"

デフォルトの保存先が `H:\DL` になっています。
- Hドライブを接続する、または
- `--output-dir` オプションで別の保存先を指定してください

### エラー: "ModuleNotFoundError: No module named 'playwright'"

初回セットアップが完了していません。
1. バッチファイルを再実行するか、
2. 手動で以下のコマンドを実行:
   ```bash
   pip install -r requirements.txt
   python -m playwright install chromium
   ```

### ダウンロードが途中で止まる

- インターネット接続を確認してください
- サイトがメンテナンス中でないか確認してください
- `--keep-temp` オプションを使用して、どこまでダウンロードされたか確認できます

### 画像が保存されない

- サイトの構造が変更された可能性があります
- `debug_error.png` というスクリーンショットが生成される場合があるので確認してください

## 🔧 上級者向け

### 画質設定の変更

`download_images_as_cbz.py` の以下の行を編集:

```python
IMAGE_FORMAT = "image/jpeg"    # 'image/png' or 'image/jpeg'
IMAGE_QUALITY = 0.95           # 0.0 ~ 1.0 (JPEGの場合)
```

### タイムアウト設定の変更

```python
TIMEOUT_PAGE_LOAD = 60000      # ページ読み込みのタイムアウト (ミリ秒)
TIMEOUT_ELEMENT_WAIT = 10000   # 要素待機のタイムアウト (ミリ秒)
```

## 📝 注意事項

- ダウンロードした漫画は個人的な使用に限定してください
- 著作権法を遵守してください
- サーバーに過度な負荷をかけないよう、適切な間隔でダウンロードしてください
